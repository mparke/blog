<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="https://www.linode.com/favicon.ico" type="image/x-icon" />
    <link rel="alternate" title="RSS" href="http://engineering.linode.com/feed.xml">
    <title>
      
      
      Redesigning Endpoints, Creating Linodes with Backup Service, and Rebuilding Linodes - Linode Engineering Blog
      
      
    </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/css/blog.css" />
  </head>
  <body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-M3XXZX"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-M3XXZX');</script>
    <!-- End Google Tag Manager -->
    <header class="clearfix">
  <nav id="main-nav" class="container" role="navigation">
    <a class="navbar-brand" href="/">
      <img id="navbar-logo" src="https://www.linode.com/media/images/header/linode-logo.svg"
           width="115" height="45" />
    </a>
    <span class="nav-text nav-title">
      Engineering
    </span>
    <span class="nav-text float-xs-right">
      <a href="https://linode.com/careers">We're hiring!</a>
    </span>
  </nav>
</header>

    <div class="container">
  <div class="row">
    <div class="col-md-3">
      <sidebar>
  <section>
    <h3>Popular posts</h3>
    <div class="recommended"><a href="#">API Alpha Events Rollout</a></div>
  </section>
  <section>
    <h3>Popular tags</h3>
    <div class='tags'><a href='/tags/APIv4'>APIv4 (9)</a></div><div class='tags'><a href='/tags/Manager'>Manager (4)</a></div><div class='tags'><a href='/tags/Python-Flask'>Python/Flask (1)</a></div>
  </section>
</sidebar>

    </div>
    <div class="col-sm-7">
      <article>
        <div class="article-tags">APIv4</div>
        <h1 class="article-title">Redesigning Endpoints, Creating Linodes with Backup Service, and Rebuilding Linodes</h1>
        <header class="article-header">
          <span class="article-date">19 Sep 2016</span>, by
          <span class="article-author">Josh Sager</span>
          <img class="article-avatar" src="https://www.linode.com/media/images/employees/jsager.png" alt="Josh Sager" width="25" />
        </header>
        <div class="article-content">
          <p>It’s interesting how some of the biggest challenges we sometimes face as programmers
have nothing to do with programming. Creating great products takes us beyond
the ones and zeros and requires us to think more like “normal” people.
<em>How</em> will it be used? How can we make it <em>better</em>? Can we solve the age-old problem
of making a product easier for our customers and still maintain good design principles
at the same time?</p>

<h3 id="redesigning-endpoints">Redesigning Endpoints</h3>

<p>For several weeks we had numerous discussions over endpoints. As we started
interfacing the API with our new Manager, it became clear that having all of
our endpoints as a part of the top-level namespace was inelegant and
needed to change. Inconsistencies in our naming conventions were also
tripping us up a bit, so we decided to take the time now to tighten things up and iron out
problems… sooner rather than later.</p>

<p>The solution was to create endpoint groups, which afforded us better organization and
some layers of separation amongst our product lines, services, and utilities.
Programmatically they do not do much, but as an interface they are much
cleaner. (A complete list of what’s changed is at the bottom of this
post.)</p>

<p>There are more changes to come, more endpoints that we’ll be refactoring, and certainly new
endpoints for parity and feature rollouts, but we could only do so many in an
interation and wanted to focus on the most prominent first.</p>

<h3 id="services-gone-hello-types">“Services” Gone, Hello “Types”</h3>

<p>We’re always looking forward with the future in mind, and one thing we decided was to
rename the term “services” to “types” in places referring to what “type”
of Linode you want to spin up. This term change allows us to expand the
API to include more features moving forward. An example of its use can
be seen with one of our new features - creating linodes with backup
service already enabled</p>

<h3 id="creating-linodes-with-backup-service-enabled">Creating Linodes With Backup Service Enabled</h3>

<p>One small oversight from past API development cycles was, admittedly, the omission of logic to enable
the Backup Service upon creation of a Linode. We recitifed that, and you can now
enable the service by using the <code class="highlighter-rouge">with_backup</code> attribute:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ curl -X POST \
    -H "Authorization: token $TOKEN" \
    -H "Content-Type: application/json" \
        https://api.alpha.linode.com/v4/linode/instances \
            -d '{"with_backup":"true","datacenter":"newark","type":"standard-1"}'
</code></pre>
</div>

<h3 id="rebuilding-a-linode">Rebuilding a Linode</h3>

<p>Another feature added is the ability to rebuild your Linode. Syntax is
straightforward:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ curl -X POST \
    -H "Authorization: token $TOKEN" \
    -H "Content-Type: application/json" \
        https://api.alpha.linode.com/v4/linode/instances/123456/rebuild \
        -d '{"distribution":"linode/debian8","root_pass":"abc123"}'
</code></pre>
</div>

<p>What’s next on our list? Finishing NodeBalancer support is still
a high priority, as well as completing IP address support. We will
continue the refactoring and addition of endpoints as well, so look for
those, too.</p>

<h3 id="endpoint-name-changes">Endpoint Name Changes</h3>

<table>
  <thead>
    <tr>
      <th>Old Endpoint</th>
      <th>New Endpoint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>/linodes</td>
      <td>/linode/instances</td>
    </tr>
    <tr>
      <td>/linodes/:id</td>
      <td>/linode/instances/:id</td>
    </tr>
    <tr>
      <td>/linodes/:id/disks</td>
      <td>/linode/instances/:id/disks</td>
    </tr>
    <tr>
      <td>/linodes/:id/disks/:id</td>
      <td>/linode/instances/:id/disks/:id</td>
    </tr>
    <tr>
      <td>/linodes/:id/disks/:id/resize</td>
      <td>/linode/instances/:id/disks/:id/resize</td>
    </tr>
    <tr>
      <td>/linodes/:id/disks/:id/password</td>
      <td>/linode/instances/:id/disks/:id/password</td>
    </tr>
    <tr>
      <td>/linodes/:id/disks/:id/configs</td>
      <td>/linode/instances/:id/disks/:id/configs</td>
    </tr>
    <tr>
      <td>/linodes/:id/disks/:id/configs/:id</td>
      <td>/linode/instances/:id/disks/:id/configs/:id</td>
    </tr>
    <tr>
      <td>/linodes/:id/boot</td>
      <td>/linode/instances/:id/boot</td>
    </tr>
    <tr>
      <td>/linodes/:id/reboot</td>
      <td>/linode/instances/:id/reboot</td>
    </tr>
    <tr>
      <td>/linodes/:id/shutdown</td>
      <td>/linode/instances/:id/shutdown</td>
    </tr>
    <tr>
      <td>/linodes/:id/backups</td>
      <td>/linode/instances/:id/backups</td>
    </tr>
    <tr>
      <td>/linodes/:id/enable</td>
      <td>/linode/instances/:id/enable</td>
    </tr>
    <tr>
      <td>/linodes/:id/cancel</td>
      <td>/linode/instances/:id/cancel</td>
    </tr>
    <tr>
      <td>/linodes/:id/restore</td>
      <td>/linode/instances/:id/restore</td>
    </tr>
    <tr>
      <td>/linodes/:id/ips</td>
      <td>/linode/instances/:id/ips</td>
    </tr>
    <tr>
      <td> </td>
      <td>/linode/instances/:id/rebuild</td>
    </tr>
    <tr>
      <td>/distributions</td>
      <td>/linode/distributions</td>
    </tr>
    <tr>
      <td>/distributions/:id</td>
      <td>/linode/distributions/:id</td>
    </tr>
    <tr>
      <td>/distributions/recommended</td>
      <td>/linode/distributions (uses filter)</td>
    </tr>
    <tr>
      <td>/kernels</td>
      <td>/linode/kernels</td>
    </tr>
    <tr>
      <td>/kernels/latest</td>
      <td>/linode/kernels/linode/latest</td>
    </tr>
    <tr>
      <td>/kernels/latest_64</td>
      <td>/linode/kernels/linode/latest_64</td>
    </tr>
    <tr>
      <td>/stackscripts</td>
      <td>/linode/stackscripts</td>
    </tr>
    <tr>
      <td>/stackscripts/mine</td>
      <td>/linode/stackscripts (uses filter)</td>
    </tr>
    <tr>
      <td>/services</td>
      <td>/linode/types</td>
    </tr>
    <tr>
      <td>/services/:id</td>
      <td>/linode/types/:id</td>
    </tr>
    <tr>
      <td>/dnszones</td>
      <td>/dns/zones</td>
    </tr>
    <tr>
      <td>/dnszones/:id</td>
      <td>/dns/zones/:id</td>
    </tr>
    <tr>
      <td>/dnszones/:id/records</td>
      <td>/dns/zones/:id/records</td>
    </tr>
    <tr>
      <td>/dnszones/:id/records/:id</td>
      <td>/dns/zones/:id/records/:id</td>
    </tr>
  </tbody>
</table>

<p>Your feedback has been very helpful to us, so keep it coming. Don’t forget to stop by
<a href="https://webchat.oftc.net/?channels=linode-next&amp;uio=d4">#linode-next on oftc</a>
to let us know how it’s going, and stay tuned at our <a href="https://github.com/linode">github</a>
for updates to our open-source projects.</p>

        </div>
      </acticle>
    </div>
  </div>
</div>

    <footer class="container">
      <div class="row">
        <div class="col-md-10 text-xs-right">
          <span class="text-muted">
            &copy; Linode 2016, CC-BY-SA 4.0<br />
            <a href="https://github.com/Linode/blog">
              Source available on GitHub
              <i class="fa fa-github"></i>
            </a>
          </span>
        </div>
      </div>
    </footer>
  </body>
</html>
