<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="https://www.linode.com/favicon.ico" type="image/x-icon" />
    <link rel="alternate" title="RSS" href="http://engineering.linode.com/feed.xml">
    <title>
      
      
      API Alpha Events Rollout - Linode Engineering Blog
      
      
    </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/css/blog.css" />
  </head>
  <body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-M3XXZX"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-M3XXZX');</script>
    <!-- End Google Tag Manager -->
    <header class="clearfix">
  <nav id="main-nav" class="container" role="navigation">
    <a class="navbar-brand" href="/">
      <img id="navbar-logo" src="https://www.linode.com/media/images/header/linode-logo.svg"
           width="115" height="45" />
    </a>
    <span class="nav-text nav-title">
      Engineering
    </span>
    <span class="nav-text float-xs-right">
      <a href="https://linode.com/careers">We're hiring!</a>
    </span>
  </nav>
</header>

    <div class="container">
  <div class="row">
    <div class="col-md-3">
      <sidebar>
  <section>
    <h3>Popular posts</h3>
    <div class="recommended"><a href="#">API Alpha Events Rollout</a></div>
  </section>
  <section>
    <h3>Popular tags</h3>
    <div class='tags'><a href='/tags/APIv4'>APIv4 (9)</a></div><div class='tags'><a href='/tags/Manager'>Manager (4)</a></div><div class='tags'><a href='/tags/Python-Flask'>Python/Flask (1)</a></div>
  </section>
</sidebar>

    </div>
    <div class="col-sm-7">
      <article>
        <div class="article-tags">APIv4</div>
        <h1 class="article-title">API Alpha Events Rollout</h1>
        <header class="article-header">
          <span class="article-date">10 Nov 2016</span>, by
          <span class="article-author">Will Smith</span>
          <img class="article-avatar" src="https://www.linode.com/media/images/employees/wsmith.png" alt="Will Smith" width="25" />
        </header>
        <div class="article-content">
          <p>The goal of the new API has never been to rewrite the same software with new technology.
We intend to come out of this project with a new application that accomplishes the same legacy tasks,
but has been designed from 13 years of practical experience.</p>

<p>Notwithstanding that hindsight, one of the biggest challenges we have faced while developing the API v4
is re-imagining Linode’s systems while maintaining compatibility with the existing infrastructure.</p>

<p>It isn’t always easy. In fact, during the past month we have battled one of the biggest specters in this space - database performance.
This battle took place entirely behind the scenes, which is why we haven’t rolled out any iterations in a while.</p>

<p>Today, however, we can and do. On our way to re-imagining Linode, we have created something entirely new that we think you’ll find valuable.</p>

<p>Today, we proudly roll out “Events.”</p>

<h2 id="introducing-events">Introducing Events</h2>

<p>New from Linode, an Event is something that has happened - or in limited cases, will happen - that not only involves your Linodes, but also
your account and other things you care about.</p>

<p>An Event could be “Create a Linode” or “Shutdown a Linode.”
It could be “Your Ticket has been Updated” or “New Post on the Linode Blog.”  Events can be seen and read, and may have other objects
associated with them - either in the API or elsewhere in the Linode system.</p>

<p>Corresponding to the new design, Events are present in the Linode API, and all facilities involving them are available
to third-party developers as well.  This means that you could easily integrate Linode Event updates to your
<a href="https://i3wm.org">i3 bar</a>, for example.  For now the alpha is getting Linode-related Events only, but we will be
expanding their rollout in the coming weeks.</p>

<p>Events are in the account group, and can be accessed like so:</p>

<ul>
  <li><code class="highlighter-rouge">GET /account/events</code> - returns a paginated list of events for your user</li>
  <li><code class="highlighter-rouge">GET /account/events/:id</code> - returns one event with the given <code class="highlighter-rouge">id</code>, or 404s</li>
  <li><code class="highlighter-rouge">POST /account/events/:id/seen</code> - marks the event at <code class="highlighter-rouge">id</code> and all events before it as seen</li>
  <li><code class="highlighter-rouge">POST /account/events/:id/read</code> - marks the event at <code class="highlighter-rouge">id</code> as read</li>
</ul>

<p>Notice that you can’t POST to <code class="highlighter-rouge">/account/events</code>?  This is a read-only collection that is populated while you do other
things.  For instance, POSTing to <code class="highlighter-rouge">/linode/instances/123/boot</code> will create an Event ‘Booting Linode linode123.’
For more information on events, see <a href="https://developers.linode.com/reference/#ep-account-events">the event documentation</a>.</p>

<h2 id="busy-boxes">Busy Boxes</h2>

<p>To support Events, and to simplify Linode systems overall, Linodes will now only accept actions when they are not busy. For
instance, while your Linode deploys, you won’t be able to ask it to reset its root password until it’s done.</p>

<p>The only exception to this prohibition is booting - you can always ask a Linode to boot when it has completed whatever task it’s doing.
This may sound like a big change, but we believe it will have little impact on the normal use of our systems, and will save the majority
of our users from confusion and complexity.</p>

<h2 id="other-changes">Other Changes</h2>

<p>In addition to the above, we’ve tweaked a few attributes of the Linode and Backup objects:</p>

<ul>
  <li>Linode objects now return only the address for IPv4 and IPv6.  If you need more information, call out to <code class="highlighter-rouge">/linode/instances/:id/ips</code></li>
  <li>Linode objects now list their hypervisor (in the alpha, only KVM is available).</li>
  <li>Backup objects now include their availability - if unavailable, they cannot be restored.</li>
  <li>To reset RDNS on an IP, PUT <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="nt">"rdns"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">}</span></code> to <code class="highlighter-rouge">/linode/instances/:id/ips/:ipid</code></li>
</ul>

<h2 id="let-us-know-what-you-think">Let Us Know What You Think</h2>

<p>As always, thank you for your continued support and feedback.  In addition to the usual channels -
<a href="https://webchat.oftc.net/?channels=linode-next&amp;uio=d4">#linode-next on oftc</a>
and on <a href="https://github.com/linode/developers">github</a> - you can now send us your feedback directly through the API.  Just POST
your thoughts to <code class="highlighter-rouge">https://api.alpha.linode.com/v4/feedback</code> (requires a token) with a body like <code class="highlighter-rouge"><span class="p">{</span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"you guys rock!"</span><span class="p">}</span></code>.</p>

        </div>
      </acticle>
    </div>
  </div>
</div>

    <footer class="container">
      <div class="row">
        <div class="col-md-10 text-xs-right">
          <span class="text-muted">
            &copy; Linode 2016, CC-BY-SA 4.0<br />
            <a href="https://github.com/Linode/blog">
              Source available on GitHub
              <i class="fa fa-github"></i>
            </a>
          </span>
        </div>
      </div>
    </footer>
  </body>
</html>
